Vue.use(window.VueTimeago),Vue.config.devtools=!0,new Vue({el:"#app",delimiters:["<%","%>"],data:()=>({first_load:!0,advenced:!1,mode:m,load:!0,rank:s,visible:!1,list:[],page:1,offset:0,search_query:q,creatorid:creator,delay:null,activeSearchDetails:["0"],form:{title:"",artist:"",creator:"",ar:[0,100],cs:[0,50],od:[0,80],hp:[0,100],bpm:[160,360],length:[0,360],sort:"set_last_updated",sort2:"Descending"}}),watch:{mode(){this.getBeatmapData()},rank(){this.getBeatmapData()},search_query(){var t=this;clearTimeout(this.delay),this.delay=setTimeout(function(){t.chageSearch_Query()},500),t.advenced=!1},creatorid(){this.getBeatmapDataByCreatorId()},form(){console.log("name"+this.form.name)}},created(){var t=this;$(function(){$(window).scroll(function(){$(window).scrollTop()+$(window).height()>.05*($(document).height()-300)&&0==t.load&&t.list.length>=48*t.page&&t.changeoffset(t.page+1,!0)}),t.getBeatmapData()})},methods:{formatadvenceSearch:t=>t/10,formlength(t){var e=~~(t/3600),a=~~(t%3600/60),r=~~t%60,o="";return e>0&&(o+=e+":"+(a<10?"0":"")),o+=a+":"+(r<10?"0":""),o+=""+r,o},makeAdvencedQuery(){var t=this,e="";return t.form.cs[0]==t.form.cs[1]?e+="cs="+t.form.cs[0]/10+" ":e+="cs>="+t.form.cs[0]/10+" cs<="+t.form.cs[1]/10+" ",t.form.ar[0]==t.form.ar[1]?e+="ar="+t.form.ar[0]/10+" ":e+="ar>="+t.form.ar[0]/10+" ar<="+t.form.ar[1]/10+" ",t.form.od[0]==t.form.od[1]?e+="od="+t.form.od[0]/10+" ":e+="od>="+t.form.od[0]/10+" od<="+t.form.od[1]/10+" ",t.form.hp[0]==t.form.hp[1]?e+="hp="+t.form.hp[0]/10+" ":e+="hp>="+t.form.hp[0]/10+" hp<="+t.form.hp[1]/10+" ",t.form.bpm[0]==t.form.bpm[1]?e+="bpm="+t.form.bpm[0]/10+" ":e+="bpm>="+t.form.bpm[0]+" bpm<="+t.form.bpm[1]+" ",t.form.length[0]==t.form.length[1]?e+="length="+t.form.length[0]+" ":e+="length>="+t.form.length[0]+" length<="+t.form.length[1]+" ",e+=t.form.artist+" "+t.form.title,t.form.creator.length>1&&(e+="creator="+t.form.creator+" "),e},changeoffset:function(t=1){var e=this;this.page=t,this.offset=0,e.getBeatmapData()},getBeatmapData:function(){var t=this;this.load=!0,window.history.replaceState("",document.title,"/main?mode="+t.mode+"&status="+t.rank+"&query="+t.search_query),t.creatorid>1?t.getBeatmapDataByCreatorId():1!=t.advenced?this.$axios.get("https://nerina.wtf/api/v3/search",{params:{offset:this.offset,mode:this.mode,amount:48*this.page,status:this.rank,query:this.search_query}}).then(function(e){t.list=e.data,t.load=!1,t.first_load=!1}):t.getBeatmapDataAdvenced()},getBeatmapDataAdvenced:function(){var t=this;this.load=!0;var e=t.makeAdvencedQuery();this.search_query=e,window.history.replaceState("",document.title,"/main?mode="+t.mode+"&status="+t.rank+"sort="+this.form.sort+"&order="+this.form.sort2+"&query="+t.search_query),this.$axios.get("https://nerina.wtf/api/v3/advencedsearch",{params:{offset:this.offset,mode:this.mode,amount:48*this.page,status:this.rank,sort:this.form.sort,order:this.form.sort2,query:this.search_query}}).then(function(e){t.list=e.data,t.activeSearchDetails=["0"],t.load=!1})},getBeatmapDataByCreatorId:function(){var t=this;console.log("Creator ID: "+t.creatorid),this.$axios.get("https://nerina.wtf/api/v3/search",{params:{offset:this.offset,mode:this.mode,amount:48*this.page,status:this.rank,query:this.search_query,creator:this.creatorid}}).then(function(e){t.list=e.data,t.load=!1})},chnageMode(t,e){var a=this;t=Number(t),a.offset=0,a.page=1,a.mode=t},chnageRankedStatus(t,e){var a=this;t=Number(t),a.offset=0,a.page=1,a.rank=t},chageSearch_Query(){var t=this;t.offset=0,t.getBeatmapData()},onSubmit(){var t=this;t.advenced=!0,t.getBeatmapData()}}});