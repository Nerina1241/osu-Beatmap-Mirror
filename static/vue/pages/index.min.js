var beatmap={props:["beatmap"],delimiters:["<%","%>"],template:'                    \n        <div class="beatmap-block">\n            <div class="beatmap-single">\n                <div class="beatmap-bg-default"></div>\n                <a :href="createBmpDlUri(beatmap.SetID)" :id="beatmap.SetID" class="cardheader ranked"\n                    :style="\'background-image: url(https://assets.ppy.sh/beatmaps/\' + beatmap.SetID + \'/covers/cover.jpg?1622784772);\'">\n                    <div>\n                        <div class="song-status">\n                            <i :class="\'fas fa-\' + convertRankedStatusToico(beatmap.RankedStatus)"></i>\n                        </div>\n                        <div class="song-stats-block">\n                            <div class="song-stats">\n                                <el-tooltip class="item" effect="dark" content="Favorites count" placement="top">\n                                    <div class="song-stats">\n                                        <i class="fas fa-heart"></i> <% addCommas(beatmap.Favourites) %>\n                                    </div>\n                                </el-tooltip>   \n                            </div>\n                            <div class="song-stats">\n                                <el-tooltip class="item" effect="dark" content="Play count" placement="top">\n                                    <div class="song-stats">\n                                        <i class="fas fa-play-circle"></i> <% addCommas(beatmap.Playcounts) %>\n                                    </div>\n                                </el-tooltip>\n                            </div>\n                            <div class="song-stats">\n                                <el-tooltip class="item" effect="dark" content="BPM" placement="top">\n                                    <div class="song-stats">\n                                        <i class="fas fa-music"></i> <% beatmap.BPM %>\n                                    </div>\n                                </el-tooltip>\n                            </div>\n                            <div class="song-stats">\n                                <el-tooltip class="item" effect="dark" content="Beatmaps Count" placement="top">\n                                    <div class="song-stats">\n                                        <i class="fas fa-clipboard-list"></i> <% beatmap.BeatmapCount %>\n                                    </div>\n                                </el-tooltip>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="d-flex flex-column creator-title">\n                        <span class="beatmap songname title"> <% beatmap.Title %></span>\n                        <span class="beatmap songname creator">by <% beatmap.Artist %></span>\n                    </div>\n                </a>\n                <div :class="\'beatmap-preview-progressbar \'+(playing ? \'playing\' : \'\')">\n                </div>\n                <div class="info">\n                    <div class="desc">\n                        mapped by <a class="song-author-name" :href="\'/main?creator=\' + beatmap.CreatorID"> <% beatmap.Creator %></a>\n                    </div>\n                    <div class="beatmap-clipboard-btn">\n                        <el-tooltip class="item" effect="dark" content="Download" placement="top">\n                            <a :href="createBmpDlUri(beatmap.SetID)" class="clipboard-icon">\n                                <i class="copyico fas fa-download"></i>\n                            </a>\n                        </el-tooltip>\n                        <el-tooltip class="item" effect="dark" content="Copy Download URL" placement="top">\n                            <a @click="clipboardDluri(beatmap.SetID)" class="clipboard-icon">\n                                <i class="copyico fas fa-paste" :id="\'Copy-\' + beatmap.SetID"></i>\n                            </a>\n                        </el-tooltip>\n                    </div>\n                </div>\n                <div class="version-list">\n                    <div class="version-list-block" :id="\'list-\' + beatmap.SetID">\n                        <el-tooltip popper-class="bmap-tooltip" placement="top" v-for="bmap in beatmap.ChildrenBeatmaps" v-bind:key="bmap.id">\n                            <div slot="content" class="beatmap-tooltip">\n                                <div class="version-hoverlist-single">\n                                    <div class="version-main-info">\n                                        <span :class="\'version-mode mode-ico insane faa fa-extra-mode-\' + convertModeToico(bmap.Mode)"></span>\n                                        <div class="version-diff">\n                                            <span class="fas fa-star"></span><% addCommas((bmap.DifficultyRating).toFixed(2)) %>\n                                        </div>\n                                        <span class="version-name"><% bmap.DiffName %></span>\n                                    </div>\n                                    <div class="version-info">\n                                        <div class="version-basic-info">\n                                            <el-tooltip placement="top" effect="light">\n                                                <div slot="content" class="beatmap-tooltip">\n                                                    Total Length\n                                                </div>\n                                                <div class="version-info-line">\n                                                    <div class="version-ico length"></div><% secondsToTime(bmap.TotalLength) %>\n                                                </div>\n                                            </el-tooltip>\n                                            <el-tooltip placement="top" effect="light">\n                                                <div slot="content" class="beatmap-tooltip">\n                                                    BPM\n                                                </div>\n                                                <div class="version-info-line">\n                                                    <div class="version-ico bpm"></div><% bmap.BPM %>\n                                                </div>\n                                            </el-tooltip>\n                                            <el-tooltip placement="top" effect="light">\n                                                <div slot="content" class="beatmap-tooltip">\n                                                    Circle Count\n                                                </div>\n                                                <div class="version-info-line">\n                                                    <div class="version-ico circlecount"></div><% addCommas(bmap.CircleCount) %>\n                                                </div>\n                                            </el-tooltip>\n                                            <el-tooltip placement="top" effect="light">\n                                                <div slot="content" class="beatmap-tooltip">\n                                                    Slider Count\n                                                </div>\n                                                <div class="version-info-line-last">\n                                                    <div class="version-ico slidercount"></div><% addCommas(bmap.SliderCount) %>\n                                                </div>\n                                            </el-tooltip>\n                                        </div>\n                                        <div class="version-more-info">\n                                            <div class="version-more-info-line">\n                                                <span class="version-more-info-text">Circle Size</span>\n                                                <el-progress :text-inside="true" :format="format" stroke-width="16" :percentage="convertPercent(bmap.CS)"></el-progress>\n                                            </div>\n                                            <div class="version-more-info-line">\n                                                <span class="version-more-info-text">HP Drain</span>\n                                                <el-progress :text-inside="true" :format="format" stroke-width="16" :percentage="convertPercent(bmap.HP)"></el-progress>\n                                            </div>\n                                            <div class="version-more-info-line">\n                                                <span class="version-more-info-text">Accuracy</span>\n                                                <el-progress :text-inside="true" :format="format" stroke-width="16" :percentage="convertPercent(bmap.OD)"></el-progress>\n                                            </div>\n                                            <div class="version-more-info-line-last">\n                                                <span class="version-more-info-text">Approach Rate</span>\n                                                <el-progress :text-inside="true" :format="format" stroke-width="16" :percentage="convertPercent(bmap.AR)"></el-progress>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="version-list-single">\n                                <i :class="\'mode-ico \' + convertDiffToClass(bmap.DifficultyRating) +\' faa fa-extra-mode-\' + convertModeToico(bmap.Mode)"></i>\n                            </div>\n                        </el-tooltip>\n                    </div>\n                </div>\n            </div>\n            <span class="beatmapset-panel-prev beatmapset-panel__play">\n                <span @click="play()" :class="\'fa fa-\' + (playing ? \'stop\' : \'play\')"></span>\n            </span>\n        </div>\n        ',name:"Beatmap",data:()=>({playing:!1,active:!0,copied:!1}),methods:{format:e=>(e/=10,e),convertRankedStatusToText(e){var a;switch(e){default:case-2:a="Graveyard";break;case-1:a="WIP";break;case 0:a="Pending";break;case 1:a="Ranked";break;case 2:a="Approved";break;case 3:a="Qualified";break;case 4:a="Loved"}return a},convertDiffToClass:e=>e<2?"easy":e<2.7?"normal":e<4?"hard":e<5.3?"insane":e<6.5?"expert":e>6.49?"expertplus":void 0,convertRankedStatusToico(e){var a;switch(e){default:case-2:case-1:case 0:a="question unranked";break;case 1:a="angle-double-up ranked";break;case 2:a="check approved";break;case 3:a="check qualified";break;case 4:a="heart loved"}return a},convertModeToico(e){var a;switch(e){default:case 0:a="osu";break;case 1:a="taiko";break;case 2:a="fruits";break;case 3:a="mania"}return a},addCommas(e){e+="";for(var a=e.split("."),t=a[0],s=a.length>1?"."+a[1]:"",n=/(\d+)(\d{3})/;n.test(t);)t=t.replace(n,"$1,$2");return t+s},convertPercent:e=>(after=10*e,after),addSpaces(e){e+="";for(var a=e.split("."),t=a[0],s=a.length>1?"."+a[1]:"",n=/(\d+)(\d{3})/;n.test(t);)t=t.replace(n,"$1 $2");return t+s},onFinish:function(){this.playing=!1;var e=thos.beatmap.SetID,a=$("#audio_"+e)[0];a.pause(),a.currentTime=0},play:function(){var e=window.audioElement,a=this;e&&e.currentTime>0&&(e.pause(),e.currentTime=0,e=null,window.audioElement=null,a.playing)?a.playing=!1:(e||(e=document.createElement("audio"),window.audioElement=e),e.setAttribute("src","https://b.ppy.sh/preview/"+this.beatmap.SetID+".mp3"),e.addEventListener("loadeddata",function(){a.playing||(a.playing=!0,e.volume=.2,e.play())}),e.addEventListener("ended",function(){a.playing=!1,window.audioElement=null},!1),e.addEventListener("pause",function(){a.playing=!1},!1))},createBmpDlUri:function(e){console.log("request generate beatmap download url..."),json={server:dlserver,beatmapsetid:e};let a=JSON.stringify(json);var t=btoa(a),s="https://api.nerina.pw/download?b="+t;return console.log("generated!: "+s),s},redirectDownload:function(e){uri=this.createBmpDlUri(e),window.location.href=uri},clipboardDluri:function(e){uri=this.createBmpDlUri(e);const a=document.createElement("textarea");document.body.appendChild(a),a.value=uri,a.select(),document.execCommand("copy"),document.body.removeChild(a);const t=document.getElementById("Copy-"+e);t.className="copyico fas fa-check",setTimeout(function(){t.className="copyico fas fa-paste"},2500)}}};Vue.use(window.VueTimeago),Vue.config.devtools=!0,new Vue({el:"#app",components:{beatmap:beatmap},data:()=>({first_load:!0,colors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}],advenced:!1,mode:m,load:!0,rank:s,visible:!1,fullscreenLoading:!1,list:[],page:1,offset:0,search_query:q,creatorid:creator,delay:null,activeSearchDetails:["0"],form:{title:"",artist:"",creator:"",ar:[0,100],cs:[0,50],od:[0,80],hp:[0,100],bpm:[160,360],length:[0,360],sort:"set_last_updated",sort2:"Descending"},downloadserver:[{serverid:0,listlabel:"All Server"},{serverid:1,listlabel:"Main Server Only"},{serverid:2,listlabel:"Sub Server Only"}],serverid:0}),watch:{mode(){this.getBeatmapData()},rank(){this.getBeatmapData()},search_query(){var e=this;clearTimeout(this.delay),this.delay=setTimeout(function(){e.chageSearch_Query()},500),e.advenced=!1},creatorid(){this.getBeatmapDataByCreatorId()},serverid(){dlserver=this.serverid}},created(){var e=this;$(function(){$(window).scroll(function(){$(window).scrollTop()+$(window).height()>$(document).height()-300&&0==e.load&&e.list.length>=48*e.page&&e.changeoffset(e.page+1,!0)}),e.getBeatmapData()})},methods:{openFullScreen1(){this.fullscreenLoading=!0,setTimeout(()=>{this.fullscreenLoading=!1},2e3)},formatadvenceSearch:e=>e/10,formlength(e){var a=~~(e/3600),t=~~(e%3600/60),s=~~e%60,n="";return a>0&&(n+=a+":"+(t<10?"0":"")),n+=t+":"+(s<10?"0":""),n+=""+s,n},makeAdvencedQuery(){var e=this,a="";return e.form.cs[0]==e.form.cs[1]?a+="cs="+e.form.cs[0]/10+" ":a+="cs>="+e.form.cs[0]/10+" cs<="+e.form.cs[1]/10+" ",e.form.ar[0]==e.form.ar[1]?a+="ar="+e.form.ar[0]/10+" ":a+="ar>="+e.form.ar[0]/10+" ar<="+e.form.ar[1]/10+" ",e.form.od[0]==e.form.od[1]?a+="od="+e.form.od[0]/10+" ":a+="od>="+e.form.od[0]/10+" od<="+e.form.od[1]/10+" ",e.form.hp[0]==e.form.hp[1]?a+="hp="+e.form.hp[0]/10+" ":a+="hp>="+e.form.hp[0]/10+" hp<="+e.form.hp[1]/10+" ",e.form.bpm[0]==e.form.bpm[1]?a+="bpm="+e.form.bpm[0]/10+" ":a+="bpm>="+e.form.bpm[0]+" bpm<="+e.form.bpm[1]+" ",e.form.length[0]==e.form.length[1]?a+="length="+e.form.length[0]+" ":a+="length>="+e.form.length[0]+" length<="+e.form.length[1]+" ",a+=e.form.artist+" "+e.form.title,e.form.creator.length>1&&(a+="creator="+e.form.creator+" "),a},changeoffset:function(e=1){var a=this;this.page=e,this.offset=0,a.getBeatmapData()},getBeatmapData:function(){var e=this;e.load=!0,e.fullscreenLoading=!0,window.history.replaceState("",document.title,"/main?mode="+e.mode+"&status="+e.rank+"&query="+e.search_query),e.creatorid>1?e.getBeatmapDataByCreatorId():1!=e.advenced?this.$axios.get("https://nerina.pw/api/v2/search",{params:{mode:this.mode,amount:48*this.page,status:this.rank,query:this.search_query}}).then(function(a){e.list=a.data,e.load=!1,e.first_load=!1,this.fullscreenLoading=!1}):e.getBeatmapDataAdvenced()},getBeatmapDataAdvenced:function(){var e=this;this.load=!0;var a=e.makeAdvencedQuery();this.search_query=a,window.history.replaceState("",document.title,"/main?mode="+e.mode+"&status="+e.rank+"sort="+this.form.sort+"&order="+this.form.sort2+"&query="+e.search_query),this.$axios.get("https://nerina.pw/api/v2/search",{params:{offset:this.offset,mode:this.mode,amount:48*this.page,status:this.rank,sort:this.form.sort,order:this.form.sort2,query:this.search_query},onDownloadProgress:e=>{let a=Math.floor(100*e.loaded/1e5);console.log("load now",a),this.loadPercent=a}}).then(function(a){e.list=a.data,e.activeSearchDetails=["0"],e.load=!1})},getBeatmapDataByCreatorId:function(){var e=this;console.log("Creator ID: "+e.creatorid),window.history.replaceState("",document.title,"/main?creator="+e.creatorid+"&mode="+e.mode+"&status="+e.rank+"sort="+this.form.sort+"&order="+this.form.sort2+"&query="+e.search_query),this.$axios.get("https://nerina.pw/api/v2/search",{params:{offset:this.offset,mode:this.mode,amount:48*this.page,status:this.rank,query:this.search_query,creatorid:this.creatorid}}).then(function(a){e.list=a.data,e.load=!1,e.first_load=!1})},chnageMode(e,a){var t=this;e=Number(e),t.offset=0,t.page=1,t.mode=e},chnageRankedStatus(e,a){var t=this;e=Number(e),t.offset=0,t.page=1,t.rank=e},chageSearch_Query(){var e=this;e.offset=0,e.getBeatmapData()},onSubmit(){var e=this;e.advenced=!0,e.getBeatmapData()}}});